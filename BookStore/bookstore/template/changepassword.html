
{% load static %}

<!DOCTYPE html>
<html lang="en">
	<head>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <title>Change Password</title>
         <script src="{% static 'js/reg.js' %}"></script>
		<!-- Google font -->
		<link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700" rel="stylesheet">

		<!-- Bootstrap -->
		<link type="text/css" rel="stylesheet" href="{% static 'css/bootstrap.min.css' %}"/>

		<!-- Slick -->
		<link type="text/css" rel="stylesheet" href="{% static 'css/slick.css' %}"/>
		<link type="text/css" rel="stylesheet" href="{% static 'css/slick-theme.css' %}"/>

		<!-- nouislider -->
		<link type="text/css" rel="stylesheet" href="{% static 'css/nouislider.min.css' %}"/>

		<!-- Font Awesome Icon -->
		<link rel="stylesheet" href="{% static 'css/font-awesome.min.css' %}">

		<!-- Custom stlylesheet -->
		<link type="text/css" rel="stylesheet" href="{% static 'css/style.css' %}"/>


		  <script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
		  <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>


    <script
      src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.1/dist/js/bootstrap.bundle.min.js"
      integrity="sha384-/bQdsTh/da6pkI1MST/rWKFNjaCP5gBSY4sEBT38Q/9RBh9AH40zEOg7Hlq2THRZ"
      crossorigin="anonymous"></script>



    </head>
    <body>
    <!-- MAIN HEADER -->
  				<!-- MAIN HEADER -->
			<div id="header">
				<!-- container -->
				<div class="container">
					<!-- row -->
					<div class="row">
						<!-- LOGO -->
						<div class="col-md-2">
							<div class="header-logo">
								<a href="#" class="logo">
									<img src="{% static 'images/logo2.png' %}" alt="" height="90" width="200">
								</a>
							</div>
						</div>
						<!-- /LOGO -->

						<!-- SEARCH BAR -->
						<div class="col-md-5">
							<div class="header-search">
								<form action="{% url 'searchbar' %}" method="GET">

												<input class="input" placeholder="Search here" name="query">
												<button type="submit" class="search-btn">Search</button>



								</form>
							</div>
						</div>
						<!-- /SEARCH BAR -->

						<!-- ACCOUNT -->
						<div class="col-md-5">
							<div class="header-ctn">
                                 <!--				dropdown				-->
								<div class="dropdown my_acc_btn">


                                 <button class="btn dropdown-toggle my_acc_btn"  type="button" data-bs-toggle="dropdown" aria-expanded="false">
									<svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" class="bi bi-book" viewBox="0 0 16 16">
                                    <path d="M1 2.828c.885-.37 2.154-.769 3.388-.893 1.33-.134 2.458.063 3.112.752v9.746c-.935-.53-2.12-.603-3.213-.493-1.18.12-2.37.461-3.287.811V2.828zm7.5-.141c.654-.689 1.782-.886 3.112-.752 1.234.124 2.503.523 3.388.893v9.923c-.918-.35-2.107-.692-3.287-.81-1.094-.111-2.278-.039-3.213.492V2.687zM8 1.783C7.015.936 5.587.81 4.287.94c-1.514.153-3.042.672-3.994 1.105A.5.5 0 0 0 0 2.5v11a.5.5 0 0 0 .707.455c.882-.4 2.303-.881 3.68-1.02 1.409-.142 2.59.087 3.223.877a.5.5 0 0 0 .78 0c.633-.79 1.814-1.019 3.222-.877 1.378.139 2.8.62 3.681 1.02A.5.5 0 0 0 16 13.5v-11a.5.5 0 0 0-.293-.455c-.952-.433-2.48-.952-3.994-1.105C10.413.809 8.985.936 8 1.783z"/>
                                    </svg> Category</button>

									<ul class="dropdown-menu">

										{% for x in category %}-->
										<li><a  href="{% url 'categorys' x.category_id %}">{{x.category_name}}</a></li>
										{% endfor %}

									</ul>
								</div>
								<!-- Cart -->
								<div class="dropdown">
									<a class="dropdown-toggle" data-toggle="dropdown" aria-expanded="true">
										<a  href="{% url 'cart' %}">
										<div>
										<svg xmlns="http://www.w3.org/2000/svg" width="17" height="17" fill="currentColor" class="bi bi-cart2" viewBox="0 0 16 16">
                                        <path d="M0 2.5A.5.5 0 0 1 .5 2H2a.5.5 0 0 1 .485.379L2.89 4H14.5a.5.5 0 0 1 .485.621l-1.5 6A.5.5 0 0 1 13 11H4a.5.5 0 0 1-.485-.379L1.61 3H.5a.5.5 0 0 1-.5-.5zM3.14 5l1.25 5h8.22l1.25-5H3.14zM5 13a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0zm9-1a1 1 0 1 0 0 2 1 1 0 0 0 0-2zm-2 1a2 2 0 1 1 4 0 2 2 0 0 1-4 0z"/>
										</svg>
										</div>
										<span>My Cart</span>
										{% for i in cart %}
										<div class="qty">{{i.product_qty}}</div>
										{% endfor %}
											</a>
									</a>
<!--									<div class="cart-dropdown">-->
<!--										<div class="cart-list">-->
<!--											<div class="product-widget">-->
<!--												<div class="product-img">-->
<!--													<img src="{% static 'images/book1.png' %}" alt="">-->
<!--												</div>-->
<!--												<div class="product-body">-->
<!--													<h3 class="product-name"><a href="#">product name goes here</a></h3>-->
<!--													<h4 class="product-price"><span class="qty">1x</span>$980.00</h4>-->
<!--												</div>-->
<!--												<button class="delete"><i class="fa fa-close"></i></button>-->
<!--											</div>-->

<!--											<div class="product-widget">-->
<!--												<div class="product-img">-->
<!--													<img src="./img/product02.png" alt="">-->
<!--												</div>-->
<!--												<div class="product-body">-->
<!--													<h3 class="product-name"><a href="#">product name goes here</a></h3>-->
<!--													<h4 class="product-price"><span class="qty">3x</span>$980.00</h4>-->
<!--												</div>-->
<!--												<button class="delete"><i class="fa fa-close"></i></button>-->
<!--											</div>-->
<!--										</div>-->
<!--										<div class="cart-summary">-->
<!--											<small>3 Item(s) selected</small>-->
<!--											<h5>SUBTOTAL: $2940.00</h5>-->
<!--										</div>-->
<!--										<div class="cart-btns">-->
<!--											<a href="#">View Cart</a>-->
<!--											<a href="{% url 'checkout' %}">Checkout  <i class="fa fa-arrow-circle-right"></i></a>-->
<!--										</div>-->

<!--								    </div>-->


								</div>

								<!-- /Cart -->


								<div class="dropdown my_acc_btn">
									{% if user.is_authenticated %}

                                 <button class="btn dropdown-toggle my_acc_btn"  type="button" data-bs-toggle="dropdown" aria-expanded="false"><svg xmlns="http://www.w3.org/2000/svg"  width="20" height="15" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                                     </svg>{{user.first_name}}</button>

									<ul class="dropdown-menu">

										<li><a class="dropdown-item" href="{% url 'profile' %}">My Account</a></li>
										<li><a class="dropdown-item" href="{% url 'changepassword' %}">Change Password</a></li>
										<li><a class="dropdown-item" href="{% url 'logout' %}">Logout</a></li>

									</ul>

								{% else %}
								 <button class="btn dropdown-toggle my_acc_btn"  type="button" data-bs-toggle="dropdown" aria-expanded="false"> <svg xmlns="http://www.w3.org/2000/svg"  width="20" height="15" fill="currentColor" class="bi bi-person" viewBox="0 0 16 16">
                                    <path d="M8 8a3 3 0 1 0 0-6 3 3 0 0 0 0 6zm2-3a2 2 0 1 1-4 0 2 2 0 0 1 4 0zm4 8c0 1-1 1-1 1H3s-1 0-1-1 1-4 6-4 6 3 6 4zm-1-.004c-.001-.246-.154-.986-.832-1.664C11.516 10.68 10.289 10 8 10c-2.29 0-3.516.68-4.168 1.332-.678.678-.83 1.418-.832 1.664h10z"/>
                                     </svg>My Account</button>
									<ul class="dropdown-menu">

										<li><a class="dropdown-item" href="{% url 'login' %}">Login</a></li>ref="{% url 'index' %}">Login</a></li>
										<li><a class="dropdown-item" href="{% url 'register' %}">Register</a></li>
									</ul>
                                        {% endif %}
                                </div>
								<!-- Menu Toogle -->
								<div class="menu-toggle">
									<a href="#">
										<i class="fa fa-bars"></i>
										<span>Menu</span>
									</a>
								</div>
								<!-- /Menu Toogle -->

						</div>

						</div>

						<!-- /ACCOUNT -->

					</div>

					<!-- row -->
				</div>
				<!-- container -->
			</div>
			<!-- /MAIN HEADER -->
		</header>
		<!-- /HEADER -->
			<!-- NAVIGATION -->
		<nav id="navigation">
			<!-- container -->
			<div class="container">
				<!-- responsive-nav -->
				<div id="responsive-nav">
					<!-- NAV -->
					<ul class="main-nav nav navbar-nav">
						<li class="active"><a href="/">Home</a></li>
						<li><a href="{% url 'allproduct' %}">All Books</a></li>
<!--						<li><a href="#">Horror</a></li>-->
<!--						<li><a href="#">History</a></li>-->
<!--						<li><a href="#">Novel</a></li>-->
<!--						<li><a href="#">Fiction</a></li>-->
<!--						<li><a href="#">Health</a></li>-->
					</ul>
					<!-- /NAV -->
				</div>
				<!-- /responsive-nav -->
			</div>
			<!-- /container -->
		</nav>
		<!-- /NAVIGATION -->
    <section class="vh-100" style="background-color: #eee;">
      <div class="container h-90">
        <div class="row d-flex justify-content-center align-items-center h-100">
          <div class="col-lg-12 col-xl-12">
            <div class="card text-black" style="border-radius: 25px;">
              <div class="card-body p-md-5">
                <div class="row justify-content-center">
                    <div class="col-md-9 col-lg-6 col-xl-5">
                      <img src="{% static 'images/book.jpg' %}" class="img-fluid" alt="Sample image">
                    </div>
                  <div class="col-md-10 col-lg-6 col-xl-5 order-1 order-lg-1" style="margin-top:20px;" >
                     <p class=" h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Change Password</p>
                      <form   action="{% url 'changepassword' %}" method="post" onclick="return resetValidate()" id="logform" name="logform">
                         <span class="login100-form-title"></span>
                            {% csrf_token %}

                              <div class="d-flex flex-row align-items-center mb-4">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                  </svg>
                                  <i class="bi bi-lock-fill"></i>
                                  <div class="form-outline flex-fill mb-0">
                                     <input class="input100" type="password" style="width: 230px;height: 30px;font-size: 18px;" id="current_password" name="current_password" placeholder="Current Password" onkeyup="npasswordValidation(this)">
                                     <span class="error-msg" id="crnt-passwd"> </span>
                                     <span class="focus-input100"></span>
                                     <span class="symbol-input100"></span>
                                  </div>
                              </div>
                              <div class="d-flex flex-row align-items-center mb-4" id="div1">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                  </svg>
                                  <i class="bi bi-lock-fill"></i>
                                  <div class="form-outline flex-fill mb-0">
                                        <input class="input100" type="password"  style="width: 230px;height: 30px;font-size: 18px;" id="new_password" name="new_password" placeholder="New Password" onkeyup="passwordValidation(this)">
                                        <span class="error-msg" id="new-passwd"> </span>
                                        <span class="focus-input100"></span>
                                        <span class="symbol-input100"></span>
                                  </div>
                              </div>
                              <div class="d-flex flex-row align-items-center mb-4">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                      </svg>
                                      <i class="bi bi-lock-fill"></i>
                                      <div class="form-outline flex-fill mb-0">
                                          <input class="input100" type="password" style="width: 230px;height: 30px;font-size: 18px;" id="confirm_passwords" name="confirm_password" placeholder="Retype Password" onkeyup="cpasswordValidation(this)">
                                          <span class="error-msg" id="confirm-passwd"> </span>
                                          <span class="focus-input100"></span>
                                          <span class="symbol-input100"></span>
                                      </div>
                              </div>
                              <div class="text-center text-lg-start mt-4 pt-2">
                                    <button type="submit" class="btn btn-primary btn-lg" style=" font-size: 17px; padding-left: 2.5rem; padding-right: 2.5rem;">Change Password</button>
                              </div>
                                      <div>
                                      {% for message in messages %}
                                      {{message}}
                                      {% endfor %}
                                       </div>

                      </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
 </style>
    <script type="text/javascript">
        function resetValidate() {

            var val = document.getElementById('current_password').value;
            if(val=="")
            {
                document.getElementById('crnt-passwd').innerHTML="**Password can't be null!!";
                return false;
            }
            else{
                document.getElementById('crnt-passwd').value = "";
            }

            var val = document.getElementById('new_password').value;
            if(val=="")
            {
                document.getElementById('new-passwd').innerHTML="**Password can't be null!!";
                return false;
            }
            else{
                document.getElementById('new-passwd').value = "";
            }
            if (!val.match(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/))
            {
                document.getElementById('new-passwd').innerHTML="**Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters'";
                return false;
            }
            else{
                document.getElementById('new-passwd').value = "";
            }

            var val = document.getElementById('confirm_passwords').value;
            if(val=="")
                {
                    document.getElementById('confirm-passwd').innerHTML="**Password can't be null!!";
                    return false;
                }
                else{
                document.getElementById('confirm-passwd').value = "";
            }

            if(val != document.getElementById('new_password').value){
            document.getElementById('confirm-passwd').innerHTML="**passwords should be matching";
            return false;
            }
            else{
            document.getElementById('confirm-passwd').innerHTML="";
            }
    }


    function npasswordValidation(inputTxt){

    var textField = document.getElementById("crnt-passwd");

    if(inputTxt.value != '' ){
        textField.textContent = '';
        textField.style.color = "green";
    }else{
        textField.textContent = '**Password cannot be null!!';
        textField.style.color = "red";
    }
}



        function passwordValidation(inputTxt){

        var regx = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/;
        var textField = document.getElementById("new-passwd");

        if(inputTxt.value != '' ){
                if(inputTxt.value.match(regx)){
                    textField.textContent = '';
                    textField.style.color = "green";

                }else{
                    textField.textContent = 'Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters';
                    textField.style.color = "red";
                }
        }else{
            textField.textContent = '**Password cannot be null!!';
            textField.style.color = "red";
        }
    }

    function cpasswordValidation(inputTxt){

    var regx =  document.getElementById("confirm_passwords").value;
    var regy =  document.getElementById("new_password").value;
    var textField = document.getElementById("confirm-passwd");

    if(inputTxt.value != '' ){
            if(regx == regy){
                textField.textContent = '';
                textField.style.color = "green";

            }else{
                textField.textContent = '**password should be matching';
                textField.style.color = "red";
            }
    }else{
        textField.textContent = '**Password cannot be null!!';
        textField.style.color = "red";
    }
}


    </script>



<!--        <script type="text/javascript">-->
<!--        function resetValidate() {-->
<!--            var password = document.getElementById('current_password').value;-->
<!--            var c_password = document.getElementById('new_password').value;-->
<!--            var form = document.getElementById('logform');-->

<!--            const isPasswordSecure = (password) => {-->
<!--                const re = new RegExp(-->
<!--                    "^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"-->
<!--                );-->
<!--                return re.test(password);-->
<!--            };-->

<!--            if (password == "") {-->
<!--                document.getElementById("log-passwd").textContent = "***Please provide password";-->
<!--                document.getElementById("log-passwd").style.border = "1px solid red";-->
<!--                document.getElementById("log-passwd").style.color = "red";-->


<!--                return false;-->
<!--            } else if (isPasswordSecure(password) == false) {-->
<!--                document.getElementById("log-passwd").textContent = "***Please provide valid password";-->
<!--                document.getElementById("log-passwd").style.border = "1px solid red";-->
<!--                document.getElementById("log-passwd").style.color = "red";-->

<!--                return false;-->
<!--            } else if (confirm_password == "") {-->
<!--                document.getElementById('log-confirm').textContent = "Please enter your confirm password";-->
<!--                document.getElementById('log-confirm').style.border = "1px solid red";-->
<!--                document.getElementById("log-confirm").style.color = "red";-->


<!--                return false;-->
<!--            } else if (password != confirm_password) {-->
<!--                document.getElementById('log-confirm').textContent = "Password does not match";-->
<!--                document.getElementById('log-confirm').style.border = "1px solid red";-->
<!--                document.getElementById("log-confirm").style.color = "red";-->

<!--                return false;-->
<!--            } else {-->
<!--                // submit forms-->
<!--                form.submit();-->
<!--            }-->
<!--        }-->
<!--    </script>-->
        <script src="{% static 'js/jquery.min.js' %}"></script>
		<script src="{% static 'js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/slick.min.js' %}"></script>
		<script src="{% static 'js/nouislider.min.js' %}"></script>
		<script src="{% static 'js/jquery.zoom.min.js' %}"></script>
		<script src="{% static 'js/main.js' %}"></script>

</body>
</html>




