{% extends 'base.html' %}
{% load static %}
{% block content %}
<!DOCTYPE html>
<html lang="en">
	<head>

		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<meta name="viewport" content="width=device-width, initial-scale=1">
	    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-Zenh87qX5JnK2Jl0vWa8Ck2rdkQ2Bzep5IDxbcnCeuOxjzrPF/et3URy9Bv1WTRi" crossorigin="anonymous">
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-OERcA2EqjJCMA+/3y+gxIOqMEjwtxJY7qPCqsdltbNJuaOe923+mo//f6V8Qbsw3" crossorigin="anonymous"></script>
        <title>Change Password</title>
         <script src="{% static 'js/reg.js' %}"></script>


    </head>
    <body>
<!--    <section class="vh-100" style="background-color: #eee;">-->
<!--      <div class="container h-100">-->
<!--        <div class="row d-flex justify-content-center align-items-center h-100">-->
<!--          <div class="col-lg-12 col-xl-11">-->
<!--            <div class="card text-black" style="border-radius: 25px;">-->
<!--              <div class="card-body p-md-5">-->
                <div class="row justify-content-center">
                    <div class="col-md-9 col-lg-6 col-xl-5">
                      <img src="{% static 'images/book.jpg' %}" class="img-fluid" alt="Sample image">
                    </div>
                  <div class="col-md-10 col-lg-6 col-xl-5 order-1 order-lg-1">
                     <p class="text-center h1 fw-bold mb-5 mx-1 mx-md-4 mt-4">Change Password</p>
                      <form   action="{% url 'changepassword' %}" method="post" onclick="return resetValidate()" id="logform" name="logform">
                         <span class="login100-form-title"></span>
                            {% csrf_token %}

                              <div class="d-flex flex-row align-items-center mb-4">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                  </svg>
                                  <i class="bi bi-lock-fill"></i>
                                  <div class="form-outline flex-fill mb-0">
                                     <input class="input100" type="password" id="current_password" name="current_password" placeholder="Current Password" onkeyup="npasswordValidation(this)">
                                     <span class="error-msg" id="crnt-passwd"> </span>
                                     <span class="focus-input100"></span>
                                     <span class="symbol-input100"></span>
                                  </div>
                              </div>
                              <div class="d-flex flex-row align-items-center mb-4">
                                  <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                    <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                  </svg>
                                  <i class="bi bi-lock-fill"></i>
                                  <div class="form-outline flex-fill mb-0">
                                        <input class="input100" type="password" id="new_password" name="new_password" placeholder="New Password" onkeyup="passwordValidation(this)">
                                        <span class="error-msg" id="new-passwd"> </span>
                                        <span class="focus-input100"></span>
                                        <span class="symbol-input100"></span>
                                  </div>
                              </div>
                              <div class="d-flex flex-row align-items-center mb-4">
                                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-lock-fill" viewBox="0 0 16 16">
                                        <path d="M8 1a2 2 0 0 1 2 2v4H6V3a2 2 0 0 1 2-2zm3 6V3a3 3 0 0 0-6 0v4a2 2 0 0 0-2 2v5a2 2 0 0 0 2 2h6a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2z"/>
                                      </svg>
                                      <i class="bi bi-lock-fill"></i>
                                      <div class="form-outline flex-fill mb-0">
                                          <input class="input100" type="password" id="confirm_passwords" name="confirm_password" placeholder="Retype Password" onkeyup="cpasswordValidation(this)">
                                          <span class="error-msg" id="confirm-passwd"> </span>
                                          <span class="focus-input100"></span>
                                          <span class="symbol-input100"></span>
                                      </div>
                              </div>
                              <div class="text-center text-lg-start mt-4 pt-2">
                                    <button type="submit" class="btn btn-primary btn-lg" style="padding-left: 2.5rem; padding-right: 2.5rem;">Change Password</button>
                              </div>
                                      <div>
                                      {% for message in messages %}
                                      {{message}}
                                      {% endfor %}
                                       </div>

                      </form>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </section>
 </style>
    <script type="text/javascript">
        function resetValidate() {

            var val = document.getElementById('current_password').value;
            if(val=="")
            {
                document.getElementById('crnt-passwd').innerHTML="**Password can't be null!!";
                return false;
            }
            else{
                document.getElementById('crnt-passwd').value = "";
            }

            var val = document.getElementById('new_password').value;
            if(val=="")
            {
                document.getElementById('new-passwd').innerHTML="**Password can't be null!!";
                return false;
            }
            else{
                document.getElementById('new-passwd').value = "";
            }
            if (!val.match(/(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/))
            {
                document.getElementById('new-passwd').innerHTML="**Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters'";
                return false;
            }
            else{
                document.getElementById('new-passwd').value = "";
            }

            var val = document.getElementById('confirm_passwords').value;
            if(val=="")
                {
                    document.getElementById('confirm-passwd').innerHTML="**Password can't be null!!";
                    return false;
                }
                else{
                document.getElementById('confirm-passwd').value = "";
            }

            if(val != document.getElementById('new_password').value){
            document.getElementById('confirm-passwd').innerHTML="**passwords should be matching";
            return false;
            }
            else{
            document.getElementById('confirm-passwd').innerHTML="";
            }
    }


    function npasswordValidation(inputTxt){

    var textField = document.getElementById("crnt-passwd");

    if(inputTxt.value != '' ){
        textField.textContent = '';
        textField.style.color = "green";
    }else{
        textField.textContent = '**Password cannot be null!!';
        textField.style.color = "red";
    }
}



        function passwordValidation(inputTxt){

        var regx = /(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{5,}/;
        var textField = document.getElementById("new-passwd");

        if(inputTxt.value != '' ){
                if(inputTxt.value.match(regx)){
                    textField.textContent = '';
                    textField.style.color = "green";

                }else{
                    textField.textContent = 'Must contain at least one number and one uppercase and lowercase letter and aleast 5 characters';
                    textField.style.color = "red";
                }
        }else{
            textField.textContent = '**Password cannot be null!!';
            textField.style.color = "red";
        }
    }

    function cpasswordValidation(inputTxt){

    var regx =  document.getElementById("confirm_passwords").value;
    var regy =  document.getElementById("new_password").value;
    var textField = document.getElementById("confirm-passwd");

    if(inputTxt.value != '' ){
            if(regx == regy){
                textField.textContent = '';
                textField.style.color = "green";

            }else{
                textField.textContent = '**password should be matching';
                textField.style.color = "red";
            }
    }else{
        textField.textContent = '**Password cannot be null!!';
        textField.style.color = "red";
    }
}


    </script>



<!--        <script type="text/javascript">-->
<!--        function resetValidate() {-->
<!--            var password = document.getElementById('current_password').value;-->
<!--            var c_password = document.getElementById('new_password').value;-->
<!--            var form = document.getElementById('logform');-->

<!--            const isPasswordSecure = (password) => {-->
<!--                const re = new RegExp(-->
<!--                    "^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.*[!@#$%^&*])(?=.{8,})"-->
<!--                );-->
<!--                return re.test(password);-->
<!--            };-->

<!--            if (password == "") {-->
<!--                document.getElementById("log-passwd").textContent = "***Please provide password";-->
<!--                document.getElementById("log-passwd").style.border = "1px solid red";-->
<!--                document.getElementById("log-passwd").style.color = "red";-->


<!--                return false;-->
<!--            } else if (isPasswordSecure(password) == false) {-->
<!--                document.getElementById("log-passwd").textContent = "***Please provide valid password";-->
<!--                document.getElementById("log-passwd").style.border = "1px solid red";-->
<!--                document.getElementById("log-passwd").style.color = "red";-->

<!--                return false;-->
<!--            } else if (confirm_password == "") {-->
<!--                document.getElementById('log-confirm').textContent = "Please enter your confirm password";-->
<!--                document.getElementById('log-confirm').style.border = "1px solid red";-->
<!--                document.getElementById("log-confirm").style.color = "red";-->


<!--                return false;-->
<!--            } else if (password != confirm_password) {-->
<!--                document.getElementById('log-confirm').textContent = "Password does not match";-->
<!--                document.getElementById('log-confirm').style.border = "1px solid red";-->
<!--                document.getElementById("log-confirm").style.color = "red";-->

<!--                return false;-->
<!--            } else {-->
<!--                // submit forms-->
<!--                form.submit();-->
<!--            }-->
<!--        }-->
<!--    </script>-->
        <script src="{% static 'js/jquery.min.js' %}"></script>
		<script src="{% static 'js/bootstrap.min.js' %}"></script>
		<script src="{% static 'js/slick.min.js' %}"></script>
		<script src="{% static 'js/nouislider.min.js' %}"></script>
		<script src="{% static 'js/jquery.zoom.min.js' %}"></script>
		<script src="{% static 'js/main.js' %}"></script>

</body>
</html>



{% endblock content %}

